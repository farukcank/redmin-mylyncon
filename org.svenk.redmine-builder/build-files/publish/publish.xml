<project name="publish">
	<dirname property="ant.file.publish.dir" file="${ant.file.publish}" />

	<import file="${buildHome}/build-files/common.xml"/>
	
	<taskdef name="sfpublish" classname="org.apache.tools.ant.taskdefs.optional.sourceforge.SourceForgePublish">
		<classpath>
			<fileset dir="${ant.file.publish.dir}/lib" >
				<include name="*.jar" />
			</fileset>
		</classpath>

	</taskdef>

	<target name="publish.sf" depends="-create.site.xml, -publish.sf" if="sf.password" >
	</target>
 	
 	<!-- create the (nightly) site.xml -->
	<target name="-create.site.xml" depends="nightlycheck" if="isNightly">
	</target>

	<target name="-publish.sf" depends="nightlycheck" if="isNightly" >
		<property file="${buildHome}/build-files/account.properties" />
		<antcall target="-publish.sf.frs" />
		<antcall target="-publish.sf.site" />
	</target>

	<target name="-publish.sf.site" >
		<scp todir="${sf.username},${sf.project.unixname}@web.sf.net:/home/groups/r/re/redmin-mylyncon/htdocs/update-site/nightly/" password="${sf.password}" verbose="true" trust="true" >
			<fileset dir="${updatesite}" >
				<include name="**/*.xml"/>
				<exclude name="**/*.jar"/>
			</fileset>
		</scp>
	</target>

	<target name="-publish.sf.frs">
		<property name="sf.user" value="${sf.username}" />
		<sfpublish releasename="nightly" packagename="update-site content" packagehidden="yes" hidden="yes" projectshortname="${sf.project.unixname}" projectname="${sf.project.longname}" username="${sf.user}" password="${sf.password}" releasedate="6/28/2003">
			<filespec filetype="jar" processortype="platform_independent" file="${updatesite}/features/org.svenk.redmine_feature_3.0.0.${forceContextQualifier}.jar" />
			<filespec filetype="jar" processortype="platform_independent" file="${updatesite}/plugins/org.svenk.redmine.core_3.0.0.${forceContextQualifier}.jar" />
			<filespec filetype="jar" processortype="platform_independent" file="${updatesite}/plugins/org.svenk.redmine.ui_3.0.0.${forceContextQualifier}.jar" />
		</sfpublish>
	</target>
</project>