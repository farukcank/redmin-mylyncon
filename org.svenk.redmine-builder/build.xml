<?xml version="1.0" encoding="UTF-8"?>
<project name="Redmine-Mylyn Build" default="main">
	<description>
            description
    </description>

	<import file="${buildHome}/build-files/common.xml" />
	<property file="${buildHome}/build-files/build.properties"/>

	<target name="-prepare">
		<tstamp />

		<record name="${buildDirectory}/build.log"/>
		<getbuildnr buildnrproperty="svnrevision"/>
		<property name="forceContextQualifier" value="${buildType}${DSTAMP}${TSTAMP}-r${svnrevision}"/>

	</target>
	
	<target name="-build" description="Call the Equinox Laucher" depends="-prepare">

		<java classname="org.eclipse.equinox.launcher.Main" fork="true" 
			failonerror="true" >
			<arg value="-application" />
			<arg value="org.eclipse.ant.core.antRunner" />
			<arg value="-buildfile" />
			<arg value="${buildfile}" />
			<arg value="${buildTarget}" />
			<jvmarg value="-Dbuilder=${buildHome}/build-files" />
			<jvmarg value="-DjavacFailOnError=true"/>
			<jvmarg value="-DbuildDirectory=${buildDirectory}"/>
			<jvmarg value="-DbaseLocation=${eclipseDir}"/>
			<jvmarg value="-DbuildHome=${buildHome}"/>
			<jvmarg value="-DforceContextQualifier=${forceContextQualifier}"/>
			<jvmarg value="-DbuildProperties=${buildHome}/build-files/build.properties"/>

			<classpath>
				<pathelement location="${equinoxjar}" />
			</classpath>

		</java>
	</target>

	<target name="main" description="Run the ...">
		<antcall target="-prepare" />
		
		
		<antcall target="-build" />
	</target>


</project>
